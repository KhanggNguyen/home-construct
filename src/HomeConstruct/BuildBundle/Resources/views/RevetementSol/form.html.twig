{% extends "@HomeConstructBuild/SecondOeuvre/base-forms-profiles-secondOeuvre.html.twig" %}

{% block content %}
    {% block button_return %}
        {% if refererIsAForm == true and secondOeuvre.revetementSol is defined and secondOeuvre.revetementSol is not null %}
            {% set retour = path('home_construct_revetement_sol_list',{'idSecondOeuvre':secondOeuvre.id}) %}
        {% else %}
            {% set retour = app.request.server.get('HTTP_REFERER') %}
        {% endif %}
        <div class="block_button_back">
            <a id="button_back"
               class=" btn btn-xl u-btn-lightblue-v3 g-width-160--md g-font-size-default g-ml-10"
               href="{{ retour }}" data-speed="350">
                <div id="icone_plus_add" class="fas fa-reply"></div>
                Retour
            </a>
        </div>
    {% endblock button_return %}

    {% block sub_content %}
        <div class="block_form_with_estimation">

            {{ form_start(form,{'attr':{'id':'form_revetementSol'}}) }}
            <div class="col-lg-9 g-mb-50">
                <!-- Info -->
                <div class="g-brd-around g-brd-gray-light-v4 rounded g-pa-30 g-mb-30 ">
                    {{ form_row(form.type) }}
                    {{ form_row(form.quantiteM2) }}

                    <div class="block_button_backnext">
                        <button id="button_next"
                                class="bouton_enregistrer btn btn-xl u-btn-lightblue-v3 g-width-160--md g-font-size-default g-ml-10"
                                href="" data-speed="350">
                            Ajouter
                            <div id="icone_plus_add" class="fas fa-plus"></div>
                        </button>
                    </div>

                </div>
                <!-- End Info -->
            </div>
            {{ form_end(form) }}
            <div class="col-lg-6 g-mb-50" style="float:right">
                <div class="block_estimation_prix">
                    <h4 class="titre_estimation text-center">
                        Données utilisées
                    </h4>
                    <ul class="liste_variables_estimation">
                        <li>
                            <h5 class="titre_sous_entite">
                                <div class="link_sous_entite">
                                    Informations sur les pièces de la maison :
                                </div>
                            </h5>
                        </li>
                        <li>
                            {% if grosOeuvre.pieces is defined and grosOeuvre.pieces is not null %}
                            {% set i=0 %}
                            {% for p in grosOeuvre.pieces %}
                        <li><i class="fas fa-check-circle variable-presente"></i>
                            {% set i=i+1 %}
                            Piéce {{ i }} : <b>{{ p.surface |number_format(2, ',', ' ') }}m&sup2</b></li>
                        {% endfor %}
                        {% else %}
                            <i class="fas fa-times variable-non-presente"></i>
                            Non renseigné

                        {% endif %}
                        </li>
                        <li>
                            <h5 class="titre_sous_entite">
                                <div class="link_sous_entite">
                                    Informations sur la maison :
                                </div>
                            </h5>
                        </li>
                        <li>
                            {% if grosOeuvre.informationBase.surfaceTotale is defined and grosOeuvre.informationBase.surfaceTotale is not null %}
                                <i class="fas fa-check-circle variable-presente"></i>
                                Surface Totale de la Maison : <b>{{ grosOeuvre.informationBase.surfaceTotale|number_format(2, ',', ' ') }}</b>
                            {% else %}
                                <i class="fas fa-times variable-non-presente"></i>
                                Non renseigné
                            {% endif %}
                        </li>

                    </ul>

                </div>
            </div>
        </div>

            <div id="table_form_revetement_sol_interieure">
                {{ include('@HomeConstructBuild/RevetementSol/complex-table-revetementSol.html.twig') }}
            </div>
        </div>
        <div class="block_button_backnext" class="media-body align-self-center">
            <a id="button_back"
               class=" btn btn-xl u-btn-lightblue-v3 g-width-160--md g-font-size-default g-ml-10"
               href="{{ path('home_construct_revetement_sol_list',{'idSecondOeuvre':secondOeuvre.id}) }}" data-speed="350">
                <div id="icone_plus_add" class="fas fa-reply"></div>
                Terminer
            </a>
        </div>


    {% endblock sub_content %}
{% endblock content %}

{% block javascripts %}
    {{ parent()}}
    <script>
        function showGrey(id) {
            var item = 'champSelect' + id;
            document.getElementById(item).style.backgroundColor = "rgba(142, 142, 142, 0.4)";
        }

        function hideGrey(id) {
            var item = 'champSelect' + id;
            document.getElementById(item).style.backgroundColor = "white";
        }
    </script>
{% endblock javascripts %}

